<div class="page-header">
  <h1><%= "#{@project.name}#{": Manage Members"}"%></h1>
</div>

<% if notice %>
<div class= "alert alert-success"><%= notice %></div>
<% end %>

<ol class="breadcrumb">
  <li><%= link_to "Projects", project_path %></li>
  <li><%= link_to @project.name, project_path(@project) %></li>
  <li class="active">Memberships</li>
</ol>

  <div class= "well form-inline">
    <%= form_for [@project, @membership], html: {class: "form-horizontal"} do |f| %>
    <%= f.collection_select :user_id, User.all, :id, :full_name, {include_blank: "Please select a user"},
        {class:"form-control"} %>
    <%= f.select(:role, Membership.roles.keys.map {|role| [role.titleize,role]},
        {include_blank: false},{class:"form-control"})%>
    <%= f.submit class: "btn btn-primary" %>
    <% end %>
  </div>

  <table>
    <div class= "form-inline">
    <% @project.memberships.each do |membership| %>
      <%= form_for [@project, membership], html: {class: "form-horizontal"} do |f| %>
    <div class= "form-group">
      <%= membership.user.full_name %>
    </div>
    <div class= "form-group">
    <%= f.select(:role, Membership.roles.keys.map {|role| [role.titleize,role]},
        {include_blank: false},{class:"form-control"})%>
    </div>
    <%= f.submit "Update", class: "btn btn-info" %>
    <%= link_to '<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>'.html_safe,
        project_membership_path(@project, membership), method: :delete, data: { confirm: "Are you sure you want to delete this?" } %>
    <br>
    <br>
    <% end %>
    <% end %>
  </div>
